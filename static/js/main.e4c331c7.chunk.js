(this.webpackJsonpflags_cnn=this.webpackJsonpflags_cnn||[]).push([[0],{20:function(t,e,a){t.exports=a(40)},25:function(t,e,a){},27:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},28:function(t,e,a){},34:function(t,e){},35:function(t,e){},36:function(t,e){},37:function(t,e){},38:function(t,e){},39:function(t,e){},40:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),i=a(13),s=a.n(i),c=(a(25),a(10)),l=a.n(c),r=a(14),h=a(15),u=a(16),d=a(19),f=a(18),m=(a(27),a(28),a(43)),v=a(44),g=a(45),x=a(41),p=["australia","canada","china","cuba","japan","malaysia","monaco","peru","poland","singapore","usa","vietnam"],b=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t,n=this;return Object(h.a)(this,a),(t=e.call(this)).Country=function(t){var e=t.name;t.p;return o.a.createElement("div",null,e)},t.pickColor=function(e){var a=t.ctx2.getImageData(e.offsetX,e.offsetY,1,1).data;t.x="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",255)")},t.handleClick=function(e){if(2==e.button&&(t.old=t.x,t.x="rgba(255,255,255,255)"),e.shiftKey&&2!=e.button){var a=t.ctx.getImageData(e.offsetX,e.offsetY,1,1).data;t.x="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",255)")}else t.bool=!0},t.handleRelease=function(e){2==e.button&&(t.x=t.old),t.bool=!1;if(null!=t.model){var a=new Image(t.canvas.toDataURL("image/png"));t.ctx.drawImage(a,0,0);var n=t.ctx.getImageData(0,0,t.w,t.h);a=(a=x.browser.fromPixels(n).resizeBilinear([23,13])).reshape([1,13,23,3]);var o=t.model.predict(a).dataSync();console.log(o);var i=o.reduce((function(t,e,a,n){return e>n[t]?a:t}),0);console.log(p[i]),t.setState({guess:p[i]})}},t.draw=function(e){t.bool&&(t.ctx.fillStyle=t.x,t.ctx.fillRect(Math.floor(e.offsetX/t.boxSize)*t.boxSize,Math.floor(e.offsetY/t.boxSize)*t.boxSize,t.boxSize,t.boxSize))},t.state={guess:"Start drawing a flag and I'll try to guess it!"},t.countries=[],t.countries=p.map((function(t){return o.a.createElement(m.a,null,o.a.createElement(n.Country,{name:t.toString()}))})),t}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.loadModel(),this.old="",this.bool=!1,this.canvas=!1,this.ctx=!1,this.flag=!1,this.prevX=0,this.currX=0,this.prevY=0,this.currY=0,this.dot_flag=!1,this.boxSize=40,this.x="white",this.y=2,this.model=null,this.weights=null,this.canvas=document.getElementById("can"),this.ctx=this.canvas.getContext("2d"),this.canvas2=document.getElementById("can2"),this.ctx2=this.canvas2.getContext("2d"),this.w=this.canvas.width,this.h=this.canvas.height,this.ctx.fillStyle="rgba(255,255,255,255)",this.ctx.fillRect(0,0,this.w,this.h),this.ctx2.fillStyle="rgba(255,255,255,255)",this.ctx2.fillRect(0,0,this.w,this.h),this.canvas.addEventListener("mousedown",this.handleClick),this.canvas.addEventListener("mouseup",this.handleRelease),this.canvas.addEventListener("mousemove",this.draw),this.canvas.addEventListener("mouseout",this.handleRelease),this.canvas2.addEventListener("mouseup",this.pickColor),this.canvas2.addEventListener("mousedown",this.pickColor);for(var t=this.canvas2.width/2,e=this.canvas2.height/2,a=0;a<=360;a+=1){var n=(a-2)*Math.PI/180,o=a*Math.PI/180;this.ctx2.beginPath(),this.ctx2.moveTo(t,e),this.ctx2.arc(t,e,32,n,o,!1),this.ctx2.closePath(),this.ctx2.fillStyle="hsl("+a+", 100%, 50%)",this.ctx2.fill()}}},{key:"loadModel",value:function(){var t=Object(r.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://TivsLThree.github.io/FlagCNN//resources/model/model.json",t.next=3,x.loadLayersModel("https://TivsLThree.github.io/FlagCNN//resources/model/model.json");case 3:this.model=t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(v.a,{className:"App",onLoad:this.load},o.a.createElement(m.a,null,o.a.createElement(g.a,{sm:10},o.a.createElement("canvas",{id:"can",width:"920",height:"520",onContextMenu:function(t){return t.preventDefault()},style:{border:"2px solid"}}),this.state.guess),o.a.createElement(g.a,{sm:2},o.a.createElement("canvas",{id:"can2",width:"64",height:"64",onContextMenu:function(t){return t.preventDefault()},style:{border:"2px solid"}}),o.a.createElement(m.a,null,"Choose Color, Right click to erase.",o.a.createElement("p",null,"Shift-click on a color on the canvas to color pick it, or just click on the color wheel!")),o.a.createElement(g.a,{sm:1},o.a.createElement("div",null,this.countries)),o.a.createElement(g.a,{sm:1}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e4c331c7.chunk.js.map